(self.webpackChunkelement_web=self.webpackChunkelement_web||[]).push([[6063],{"./node_modules/matrix-js-sdk/src/@types/beacon.ts":(e,t,n)=>{"use strict";var r=n("./node_modules/matrix-js-sdk/src/NamespacedValue.ts");new r.qr("m.beacon_info","org.matrix.msc3672.beacon_info"),new r.qr("m.beacon","org.matrix.msc3672.beacon")},"./node_modules/matrix-js-sdk/src/@types/event.ts":(e,t,n)=>{"use strict";n.d(t,{Bx:()=>o});var r=n("./node_modules/matrix-js-sdk/src/NamespacedValue.ts");n("./node_modules/matrix-js-sdk/src/@types/beacon.ts"),n("./node_modules/matrix-js-sdk/src/@types/polls.ts");let o=function(e){return e.RoomCanonicalAlias="m.room.canonical_alias",e.RoomCreate="m.room.create",e.RoomJoinRules="m.room.join_rules",e.RoomMember="m.room.member",e.RoomThirdPartyInvite="m.room.third_party_invite",e.RoomPowerLevels="m.room.power_levels",e.RoomName="m.room.name",e.RoomTopic="m.room.topic",e.RoomAvatar="m.room.avatar",e.RoomPinnedEvents="m.room.pinned_events",e.RoomEncryption="m.room.encryption",e.RoomHistoryVisibility="m.room.history_visibility",e.RoomGuestAccess="m.room.guest_access",e.RoomServerAcl="m.room.server_acl",e.RoomTombstone="m.room.tombstone",e.RoomPredecessor="org.matrix.msc3946.room_predecessor",e.PolicyRuleUser="m.policy.rule.user",e.PolicyRuleRoom="m.policy.rule.room",e.PolicyRuleServer="m.policy.rule.server",e.SpaceChild="m.space.child",e.SpaceParent="m.space.parent",e.RoomRedaction="m.room.redaction",e.RoomMessage="m.room.message",e.RoomMessageEncrypted="m.room.encrypted",e.Sticker="m.sticker",e.CallInvite="m.call.invite",e.CallCandidates="m.call.candidates",e.CallAnswer="m.call.answer",e.CallHangup="m.call.hangup",e.CallReject="m.call.reject",e.CallSelectAnswer="m.call.select_answer",e.CallNegotiate="m.call.negotiate",e.CallSDPStreamMetadataChanged="m.call.sdp_stream_metadata_changed",e.CallSDPStreamMetadataChangedPrefix="org.matrix.call.sdp_stream_metadata_changed",e.CallReplaces="m.call.replaces",e.CallAssertedIdentity="m.call.asserted_identity",e.CallAssertedIdentityPrefix="org.matrix.call.asserted_identity",e.CallEncryptionKeysPrefix="io.element.call.encryption_keys",e.KeyVerificationRequest="m.key.verification.request",e.KeyVerificationStart="m.key.verification.start",e.KeyVerificationCancel="m.key.verification.cancel",e.KeyVerificationMac="m.key.verification.mac",e.KeyVerificationDone="m.key.verification.done",e.KeyVerificationKey="m.key.verification.key",e.KeyVerificationAccept="m.key.verification.accept",e.KeyVerificationReady="m.key.verification.ready",e.RoomMessageFeedback="m.room.message.feedback",e.Reaction="m.reaction",e.PollStart="org.matrix.msc3381.poll.start",e.Typing="m.typing",e.Receipt="m.receipt",e.Presence="m.presence",e.FullyRead="m.fully_read",e.Tag="m.tag",e.SpaceOrder="org.matrix.msc3230.space_order",e.PushRules="m.push_rules",e.Direct="m.direct",e.IgnoredUserList="m.ignored_user_list",e.RoomKey="m.room_key",e.RoomKeyRequest="m.room_key_request",e.ForwardedRoomKey="m.forwarded_room_key",e.Dummy="m.dummy",e.GroupCallPrefix="org.matrix.msc3401.call",e.GroupCallMemberPrefix="org.matrix.msc3401.call.member",e.CallNotify="org.matrix.msc4075.call.notify",e}({});new r.qr("m.room.purpose","org.matrix.msc3088.purpose"),new r.qr("m.enabled","org.matrix.msc3088.enabled"),new r.qr("m.data_tree","org.matrix.msc3089.data_tree"),new r.qr("m.leaf","org.matrix.msc3089.leaf"),new r.qr("m.branch","org.matrix.msc3089.branch"),new r.qr("m.room.marker","org.matrix.msc2716.marker"),new r.qr("with_rel_types","org.matrix.msc3912.with_relations"),new r.qr("io.element.functional_members","io.element.functional_members"),new r.qr("m.visibility","org.matrix.msc3531.visibility"),new r.qr("enabled","org.matrix.msc3881.enabled"),new r.qr("device_id","org.matrix.msc3881.device_id"),new r.qr("m.local_notification_settings","org.matrix.msc3890.local_notification_settings"),new r.qr("thread_id","org.matrix.msc4023.thread_id"),new r.xu("membership","io.element.msc4115.membership")},"./node_modules/matrix-js-sdk/src/@types/extensible_events.ts":(e,t,n)=>{"use strict";var r=n("./node_modules/matrix-events-sdk/lib/index.js");new r.UnstableValue("m.message","org.matrix.msc1767.message"),new r.UnstableValue("m.text","org.matrix.msc1767.text"),new r.UnstableValue("m.html","org.matrix.msc1767.html"),new r.NamespacedValue("m.reference")},"./node_modules/matrix-js-sdk/src/@types/location.ts":(e,t,n)=>{"use strict";var r=n("./node_modules/matrix-js-sdk/src/NamespacedValue.ts");n("./node_modules/matrix-js-sdk/src/@types/extensible_events.ts");new r.qr("m.asset","org.matrix.msc3488.asset"),new r.qr("m.ts","org.matrix.msc3488.ts"),new r.qr("m.location","org.matrix.msc3488.location")},"./node_modules/matrix-js-sdk/src/@types/polls.ts":(e,t,n)=>{"use strict";var r=n("./node_modules/matrix-events-sdk/lib/index.js");new r.UnstableValue("m.poll.disclosed","org.matrix.msc3381.poll.disclosed"),new r.UnstableValue("m.poll.undisclosed","org.matrix.msc3381.poll.undisclosed"),new r.UnstableValue("m.poll.start","org.matrix.msc3381.poll.start"),new r.UnstableValue("m.poll.response","org.matrix.msc3381.poll.response"),new r.UnstableValue("m.poll.end","org.matrix.msc3381.poll.end")},"./node_modules/matrix-js-sdk/src/@types/read_receipts.ts":(e,t,n)=>{"use strict";n.d(t,{L:()=>r});let r=function(e){return e.Read="m.read",e.FullyRead="m.fully_read",e.ReadPrivate="m.read.private",e}({})},"./node_modules/matrix-js-sdk/src/@types/sync.ts":(e,t,n)=>{"use strict";n.d(t,{a:()=>r});const r=new(n("./node_modules/matrix-js-sdk/src/NamespacedValue.ts").M6)("unread_thread_notifications","org.matrix.msc3773.unread_thread_notifications")},"./node_modules/matrix-js-sdk/src/NamespacedValue.ts":(e,t,n)=>{"use strict";n.d(t,{M6:()=>i,qr:()=>s,xu:()=>o});var r=n("./node_modules/@babel/runtime/helpers/esm/defineProperty.js");class o{constructor(e,t){if(this.stable=e,this.unstable=t,!this.unstable&&!this.stable)throw new Error("One of stable or unstable values must be supplied")}get name(){return this.stable?this.stable:this.unstable}get altName(){return this.stable?this.unstable:null}get names(){const e=[this.name],t=this.altName;return t&&e.push(t),e}matches(e){return this.name===e||this.altName===e}findIn(e){let t;return this.name&&(t=null==e?void 0:e[this.name]),!t&&this.altName&&(t=null==e?void 0:e[this.altName]),t}includedIn(e){let t=!1;return this.name&&(t=e.includes(this.name)),!t&&this.altName&&(t=e.includes(this.altName)),t}}class i extends o{constructor(...e){super(...e),(0,r.A)(this,"preferUnstable",!1)}setPreferUnstable(e){this.preferUnstable=e}get name(){return this.stable&&!this.preferUnstable?this.stable:this.unstable}}class s extends o{constructor(e,t){if(super(e,t),!this.unstable)throw new Error("Unstable value must be supplied")}get name(){return this.unstable}get altName(){return this.stable}}},"./node_modules/matrix-js-sdk/src/indexeddb-worker.ts":(e,t,n)=>{"use strict";n.d(t,{h:()=>s});var r=n("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=n("./node_modules/matrix-js-sdk/src/store/indexeddb-local-backend.ts"),i=n("./node_modules/matrix-js-sdk/src/logger.ts");class s{constructor(e){(0,r.A)(this,"backend",void 0),(0,r.A)(this,"onClose",(()=>{this.postMessage.call(null,{command:"closed"})})),(0,r.A)(this,"onMessage",(e=>{var t,n,r,s,a,l,u,c,m,d,f,p,v,y,b,h;const _=e.data;let g;switch(_.command){case"setupWorker":this.backend=new o.k(indexedDB,_.args[0]),g=Promise.resolve();break;case"connect":g=null===(t=this.backend)||void 0===t?void 0:t.connect(this.onClose);break;case"isNewlyCreated":g=null===(n=this.backend)||void 0===n?void 0:n.isNewlyCreated();break;case"clearDatabase":g=null===(r=this.backend)||void 0===r?void 0:r.clearDatabase();break;case"getSavedSync":g=null===(s=this.backend)||void 0===s?void 0:s.getSavedSync(!1);break;case"setSyncData":g=null===(a=this.backend)||void 0===a?void 0:a.setSyncData(_.args[0]);break;case"syncToDatabase":g=null===(l=this.backend)||void 0===l?void 0:l.syncToDatabase(_.args[0]);break;case"getUserPresenceEvents":g=null===(u=this.backend)||void 0===u?void 0:u.getUserPresenceEvents();break;case"getNextBatchToken":g=null===(c=this.backend)||void 0===c?void 0:c.getNextBatchToken();break;case"getOutOfBandMembers":g=null===(m=this.backend)||void 0===m?void 0:m.getOutOfBandMembers(_.args[0]);break;case"clearOutOfBandMembers":g=null===(d=this.backend)||void 0===d?void 0:d.clearOutOfBandMembers(_.args[0]);break;case"setOutOfBandMembers":g=null===(f=this.backend)||void 0===f?void 0:f.setOutOfBandMembers(_.args[0],_.args[1]);break;case"getClientOptions":g=null===(p=this.backend)||void 0===p?void 0:p.getClientOptions();break;case"storeClientOptions":g=null===(v=this.backend)||void 0===v?void 0:v.storeClientOptions(_.args[0]);break;case"saveToDeviceBatches":g=null===(y=this.backend)||void 0===y?void 0:y.saveToDeviceBatches(_.args[0]);break;case"getOldestToDeviceBatch":g=null===(b=this.backend)||void 0===b?void 0:b.getOldestToDeviceBatch();break;case"removeToDeviceBatch":g=null===(h=this.backend)||void 0===h?void 0:h.removeToDeviceBatch(_.args[0])}void 0!==g?g.then((e=>{this.postMessage.call(null,{command:"cmd_success",seq:_.seq,result:e})}),(e=>{i.v.error("Error running command: "+_.command,e),this.postMessage.call(null,{command:"cmd_fail",seq:_.seq,error:{message:e.message,name:e.name}})})):this.postMessage({command:"cmd_fail",seq:_.seq,error:"Unrecognised command"})})),this.postMessage=e}}},"./node_modules/matrix-js-sdk/src/logger.ts":(e,t,n)=>{"use strict";n.d(t,{v:()=>a});var r=n("./node_modules/loglevel/lib/loglevel.js"),o=n.n(r);const i="matrix";function s(e){const t=e;t.getChild=t.withPrefix=function(e){return function(e){const t=o().getLogger(`${i}-${e}`);t.prefix!==e&&(s(t),t.prefix=e,t.setLevel(o().levels.DEBUG,!1));return t}((this.prefix||"")+e)}}o().methodFactory=function(e,t,n){return function(...t){this.prefix&&t.unshift(this.prefix);return"error"===e||"warn"===e||"trace"===e||"info"===e||"debug"===e?console[e](...t):console.log(...t)}};const a=o().getLogger(i);a.setLevel(o().levels.DEBUG,!1),s(a)},"./node_modules/matrix-js-sdk/src/sync-accumulator.ts":(e,t,n)=>{"use strict";n.d(t,{w:()=>c});var r=n("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=n("./node_modules/matrix-js-sdk/src/logger.ts"),i=n("./node_modules/matrix-js-sdk/src/utils.ts"),s=n("./node_modules/matrix-js-sdk/src/@types/sync.ts"),a=n("./node_modules/matrix-js-sdk/src/@types/event.ts");class l{constructor(){(0,r.A)(this,"unthreadedReadReceipts",new Map),(0,r.A)(this,"threadedReadReceipts",new i.kG((()=>new Map)))}setUnthreaded(e,t){this.unthreadedReadReceipts.set(e,t)}setThreaded(e,t,n){this.threadedReadReceipts.getOrCreate(e).set(t,n)}allUnthreaded(){return this.unthreadedReadReceipts.entries()}*allThreaded(){for(const e of this.threadedReadReceipts.values())for(const t of e.entries())yield t}consumeEphemeralEvents(e){null==e||e.forEach((e=>{e.type===a.Bx.Receipt&&e.content&&Object.keys(e.content).forEach((t=>{Object.entries(e.content[t]).forEach((([n,r])=>{if((0,i.ll)(n))for(const o of Object.keys(r)){const r=e.content[t][n][o],i={data:e.content[t][n][o],type:n,eventId:t};r.thread_id?this.setThreaded(r.thread_id,o,i):this.setUnthreaded(o,i)}}))}))}))}buildAccumulatedReceiptEvent(e){const t={type:a.Bx.Receipt,room_id:e,content:{}},n=new i.kG((()=>new i.kG((()=>new Map))));for(const[e,t]of this.allUnthreaded())n.getOrCreate(t.eventId).getOrCreate(t.type).set(e,t.data);for(const[e,t]of this.allThreaded())n.getOrCreate(t.eventId).getOrCreate(t.type).set(e,t.data);return t.content=(0,i.HF)(n),n.size>0?t:null}}let u=function(e){return e.Invite="invite",e.Leave="leave",e.Join="join",e.Knock="knock",e}({});class c{constructor(e={}){(0,r.A)(this,"accountData",{}),(0,r.A)(this,"inviteRooms",{}),(0,r.A)(this,"knockRooms",{}),(0,r.A)(this,"joinRooms",{}),(0,r.A)(this,"nextBatch",null),this.opts=e,this.opts.maxTimelineEntries=this.opts.maxTimelineEntries||50}accumulate(e,t=!1){this.accumulateRooms(e,t),this.accumulateAccountData(e),this.nextBatch=e.next_batch}accumulateAccountData(e){e.account_data&&e.account_data.events&&e.account_data.events.forEach((e=>{this.accountData[e.type]=e}))}accumulateRooms(e,t=!1){e.rooms&&(e.rooms.invite&&Object.keys(e.rooms.invite).forEach((n=>{this.accumulateRoom(n,u.Invite,e.rooms.invite[n],t)})),e.rooms.join&&Object.keys(e.rooms.join).forEach((n=>{this.accumulateRoom(n,u.Join,e.rooms.join[n],t)})),e.rooms.leave&&Object.keys(e.rooms.leave).forEach((n=>{this.accumulateRoom(n,u.Leave,e.rooms.leave[n],t)})),e.rooms.knock&&Object.keys(e.rooms.knock).forEach((n=>{this.accumulateRoom(n,u.Knock,e.rooms.knock[n],t)})))}accumulateRoom(e,t,n,r=!1){switch(t){case u.Invite:this.knockRooms[e]&&delete this.knockRooms[e],this.accumulateInviteState(e,n);break;case u.Knock:this.accumulateKnockState(e,n);break;case u.Join:this.inviteRooms[e]&&delete this.inviteRooms[e],this.accumulateJoinState(e,n,r);break;case u.Leave:this.knockRooms[e]?delete this.knockRooms[e]:this.inviteRooms[e]?delete this.inviteRooms[e]:delete this.joinRooms[e];break;default:o.v.error("Unknown cateogory: ",t)}}accumulateInviteState(e,t){if(!t.invite_state||!t.invite_state.events)return;if(!this.inviteRooms[e])return void(this.inviteRooms[e]={invite_state:t.invite_state});const n=this.inviteRooms[e];t.invite_state.events.forEach((e=>{let t=!1;for(let r=0;r<n.invite_state.events.length;r++){const o=n.invite_state.events[r];o.type===e.type&&o.state_key==e.state_key&&(n.invite_state.events[r]=e,t=!0)}t||n.invite_state.events.push(e)}))}accumulateKnockState(e,t){if(!t.knock_state||!t.knock_state.events)return;if(!this.knockRooms[e])return void(this.knockRooms[e]={knock_state:t.knock_state});const n=this.knockRooms[e];t.knock_state.events.forEach((e=>{let t=!1;for(let r=0;r<n.knock_state.events.length;r++){const o=n.knock_state.events[r];o.type===e.type&&o.state_key==e.state_key&&(n.knock_state.events[r]=e,t=!0)}t||n.knock_state.events.push(e)}))}accumulateJoinState(e,t,n=!1){var r,o,i,a,u,c;this.joinRooms[e]||(this.joinRooms[e]={_currentState:Object.create(null),_timeline:[],_accountData:Object.create(null),_unreadNotifications:{},_unreadThreadNotifications:{},_summary:{},_receipts:new l});const d=this.joinRooms[e];if(t.account_data&&t.account_data.events&&t.account_data.events.forEach((e=>{d._accountData[e.type]=e})),t.unread_notifications&&(d._unreadNotifications=t.unread_notifications),d._unreadThreadNotifications=null!==(r=null!==(o=t[s.a.stable])&&void 0!==o?o:t[s.a.unstable])&&void 0!==r?r:void 0,t.summary){var f,p,v;const e="m.heroes",n="m.invited_member_count",r="m.joined_member_count",o=d._summary,i=t.summary;o[e]=null!==(f=i[e])&&void 0!==f?f:o[e],o[r]=null!==(p=i[r])&&void 0!==p?p:o[r],o[n]=null!==(v=i[n])&&void 0!==v?v:o[n]}if(d._receipts.consumeEphemeralEvents(null===(i=t.ephemeral)||void 0===i?void 0:i.events),t.timeline&&t.timeline.limited&&(d._timeline=[]),null===(a=t.state)||void 0===a||null===(a=a.events)||void 0===a||a.forEach((e=>{m(d._currentState,e)})),null===(u=t["org.matrix.msc4222.state_after"])||void 0===u||null===(u=u.events)||void 0===u||u.forEach((e=>{m(d._currentState,e)})),null===(c=t.timeline)||void 0===c||null===(c=c.events)||void 0===c||c.forEach(((e,r)=>{var o;let i;if(t["org.matrix.msc4222.state_after"]||m(d._currentState,e),n)i=e;else{var s;i=Object.assign({},e),void 0!==i.unsigned&&(i.unsigned=Object.assign({},i.unsigned));const t=null===(s=e.unsigned)||void 0===s?void 0:s.age;void 0!==t&&(i._localTs=Date.now()-t)}d._timeline.push({event:i,token:0===r&&null!==(o=t.timeline.prev_batch)&&void 0!==o?o:null})})),d._timeline.length>this.opts.maxTimelineEntries){for(let e=d._timeline.length-this.opts.maxTimelineEntries;e<d._timeline.length;e++)if(d._timeline[e].token){d._timeline=d._timeline.slice(e,d._timeline.length);break}}}getJSON(e=!1){const t={join:{},invite:{},knock:{},leave:{}};Object.keys(this.inviteRooms).forEach((e=>{t.invite[e]=this.inviteRooms[e]})),Object.keys(this.knockRooms).forEach((e=>{t.knock[e]=this.knockRooms[e]})),Object.keys(this.joinRooms).forEach((n=>{const r=this.joinRooms[n],o={ephemeral:{events:[]},account_data:{events:[]},state:{events:[]},"org.matrix.msc4222.state_after":{events:[]},timeline:{events:[],prev_batch:null},unread_notifications:r._unreadNotifications,unread_thread_notifications:r._unreadThreadNotifications,summary:r._summary};Object.keys(r._accountData).forEach((e=>{o.account_data.events.push(r._accountData[e])}));const s=r._receipts.buildAccumulatedReceiptEvent(n);s&&o.ephemeral.events.push(s),r._timeline.forEach((t=>{if(!o.timeline.prev_batch){if(!t.token)return;o.timeline.prev_batch=t.token}let n;var r;!e&&("_localTs"in(r=t.event)&&void 0!==r._localTs)?(n=Object.assign({},t.event),void 0!==n.unsigned&&(n.unsigned=Object.assign({},n.unsigned)),delete n._localTs,n.unsigned=n.unsigned||{},n.unsigned.age=Date.now()-t.event._localTs):n=t.event,o.timeline.events.push(n)}));const a=Object.create(null);for(let e=o.timeline.events.length-1;e>=0;e--){const t=o.timeline.events[e];if(null===t.state_key||void 0===t.state_key)continue;const n=(0,i.A4)(t);n.unsigned&&(n.unsigned.prev_content&&(n.content=n.unsigned.prev_content),n.unsigned.prev_sender&&(n.sender=n.unsigned.prev_sender)),m(a,n)}Object.keys(r._currentState).forEach((e=>{Object.keys(r._currentState[e]).forEach((t=>{let n=r._currentState[e][t];o["org.matrix.msc4222.state_after"].events.push(n),a[e]&&a[e][t]&&(n=a[e][t]),o.state.events.push(n)}))})),t.join[n]=o}));const n=[];return Object.keys(this.accountData).forEach((e=>{n.push(this.accountData[e])})),{nextBatch:this.nextBatch,roomsData:t,accountData:n}}getNextBatchToken(){return this.nextBatch}}function m(e,t){null!==t.state_key&&void 0!==t.state_key&&t.type&&(e[t.type]||(e[t.type]=Object.create(null)),e[t.type][t.state_key]=t)}},"./node_modules/matrix-js-sdk/src/utils.ts":(e,t,n)=>{"use strict";n.d(t,{A4:()=>o,HF:()=>l,j0:()=>i,kG:()=>u,ll:()=>s});n("./node_modules/unhomoglyph/index.js"),n("./node_modules/p-retry/index.js"),n("./node_modules/matrix-js-sdk/src/@types/location.ts");var r=n("./node_modules/matrix-js-sdk/src/@types/read_receipts.ts");new Map;function o(e){return JSON.parse(JSON.stringify(e))}function i(e){return Promise.resolve(e())}(()=>{let e="";for(let t=32;t<=126;t++)e+=String.fromCharCode(t)})();function s(e){return[r.L.Read,r.L.ReadPrivate].includes(e)}function a(e){return e instanceof Map?l(e):Array.isArray(e)?e.map((e=>a(e))):e}function l(e){const t=new Map;for(const[n,r]of e)t.set(n,a(r));return Object.fromEntries(t.entries())}class u extends Map{constructor(e){super(),this.createDefault=e}getOrCreate(e){return this.has(e)||this.set(e,this.createDefault()),this.get(e)}}},"./node_modules/loglevel/lib/loglevel.js":function(e,t,n){var r,o;!function(){"use strict";r=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],o={},i=null;function s(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(r){return"debug"===r&&(r="log"),typeof console!==t&&("trace"===r&&n?a:void 0!==console[r]?s(console,r):void 0!==console.log?s(console,"log"):e)}function u(){for(var n=this.getLevel(),o=0;o<r.length;o++){var i=r[o];this[i]=o<n?e:this.methodFactory(i,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function c(e){return function(){typeof console!==t&&(u.call(this),this[e].apply(this,arguments))}}function m(e,t,n){return l(e)||c.apply(this,arguments)}function d(e,n){var s,a,l,c=this,d="loglevel";function f(e){var n=(r[e]||"silent").toUpperCase();if(typeof window!==t&&d){try{return void(window.localStorage[d]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"="+n+";"}catch(e){}}}function p(){var e;if(typeof window!==t&&d){try{e=window.localStorage[d]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,r=encodeURIComponent(d),o=n.indexOf(r+"=");-1!==o&&(e=/^([^;]+)/.exec(n.slice(o+r.length+1))[1])}catch(e){}return void 0===c.levels[e]&&(e=void 0),e}}function v(){if(typeof window!==t&&d){try{window.localStorage.removeItem(d)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}function y(e){var t=e;if("string"==typeof t&&void 0!==c.levels[t.toUpperCase()]&&(t=c.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=c.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?d+=":"+e:"symbol"==typeof e&&(d=void 0),c.name=e,c.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},c.methodFactory=n||m,c.getLevel=function(){return null!=l?l:null!=a?a:s},c.setLevel=function(e,t){return l=y(e),!1!==t&&f(l),u.call(c)},c.setDefaultLevel=function(e){a=y(e),p()||c.setLevel(e,!1)},c.resetLevel=function(){l=null,v(),u.call(c)},c.enableAll=function(e){c.setLevel(c.levels.TRACE,e)},c.disableAll=function(e){c.setLevel(c.levels.SILENT,e)},c.rebuild=function(){if(i!==c&&(s=y(i.getLevel())),u.call(c),i===c)for(var e in o)o[e].rebuild()},s=y(i?i.getLevel():"WARN");var b=p();null!=b&&(l=y(b)),u.call(c)}(i=new d).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=o[e];return t||(t=o[e]=new d(e,i.methodFactory)),t};var f=typeof window!==t?window.log:void 0;return i.noConflict=function(){return typeof window!==t&&window.log===i&&(window.log=f),i},i.getLoggers=function(){return o},i.default=i,i},void 0===(o="function"==typeof r?r.call(t,n,t,e):r)||(e.exports=o)}()},"./node_modules/matrix-events-sdk/lib/ExtensibleEvents.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensibleEvents=void 0;var r=n("./node_modules/matrix-events-sdk/lib/NamespacedMap.js"),o=n("./node_modules/matrix-events-sdk/lib/InvalidEventError.js"),i=n("./node_modules/matrix-events-sdk/lib/interpreters/legacy/MRoomMessage.js"),s=n("./node_modules/matrix-events-sdk/lib/interpreters/modern/MMessage.js"),a=n("./node_modules/matrix-events-sdk/lib/events/message_types.js"),l=n("./node_modules/matrix-events-sdk/lib/events/poll_types.js"),u=n("./node_modules/matrix-events-sdk/lib/interpreters/modern/MPoll.js");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"interpreters",new r.NamespacedMap([[i.LEGACY_M_ROOM_MESSAGE,i.parseMRoomMessage],[a.M_MESSAGE,s.parseMMessage],[a.M_EMOTE,s.parseMMessage],[a.M_NOTICE,s.parseMMessage],[l.M_POLL_START,u.parseMPoll],[l.M_POLL_RESPONSE,u.parseMPoll],[l.M_POLL_END,u.parseMPoll]])),f(this,"_unknownInterpretOrder",[a.M_MESSAGE])}var t,n,m;return t=e,m=[{key:"defaultInstance",get:function(){return e._defaultInstance}},{key:"unknownInterpretOrder",get:function(){return e.defaultInstance.unknownInterpretOrder},set:function(t){e.defaultInstance.unknownInterpretOrder=t}},{key:"registerInterpreter",value:function(t,n){e.defaultInstance.registerInterpreter(t,n)}},{key:"parse",value:function(t){return e.defaultInstance.parse(t)}}],(n=[{key:"unknownInterpretOrder",get:function(){var e;return null!==(e=this._unknownInterpretOrder)&&void 0!==e?e:[]},set:function(e){this._unknownInterpretOrder=e}},{key:"registerInterpreter",value:function(e,t){this.interpreters.set(e,t)}},{key:"parse",value:function(e){try{if(this.interpreters.hasNamespaced(e.type))return this.interpreters.getNamespaced(e.type)(e);var t,n=c(this.unknownInterpretOrder);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.interpreters.has(r)){var i=this.interpreters.get(r)(e);if(i)return i}}}catch(e){n.e(e)}finally{n.f()}return null}catch(e){if(e instanceof o.InvalidEventError)return null;throw e}}}])&&d(t.prototype,n),m&&d(t,m),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.ExtensibleEvents=p,f(p,"_defaultInstance",new p)},"./node_modules/matrix-events-sdk/lib/IPartialEvent.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/matrix-events-sdk/lib/InvalidEventError.js":(e,t)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e){var t=a();return function(){var r,o=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function i(e){var t="function"==typeof Map?new Map:void 0;return i=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return s(e,arguments,u(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)},i(e)}function s(e,t,n){return s=a()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&l(o,n.prototype),o},s.apply(null,arguments)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidEventError=void 0;var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(a,e);var t,n,i,s=o(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,e)}return t=a,n&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(i(Error));t.InvalidEventError=c},"./node_modules/matrix-events-sdk/lib/NamespacedMap.js":(e,t)=>{"use strict";function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.NamespacedMap=void 0;var i=function(){function e(t){var r,o,i;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o="internalMap",i=new Map,o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,t){var s,a=n(t);try{for(a.s();!(s=a.n()).done;){var l=s.value;this.set(l[0],l[1])}}catch(e){a.e(e)}finally{a.f()}}}var t,r,i;return t=e,(r=[{key:"get",value:function(e){return e.name&&this.internalMap.has(e.name)?this.internalMap.get(e.name):e.altName&&this.internalMap.has(e.altName)?this.internalMap.get(e.altName):null}},{key:"set",value:function(e,t){e.name&&this.internalMap.set(e.name,t),e.altName&&this.internalMap.set(e.altName,t)}},{key:"has",value:function(e){return!!this.get(e)}},{key:"delete",value:function(e){e.name&&this.internalMap.delete(e.name),e.altName&&this.internalMap.delete(e.altName)}},{key:"hasNamespaced",value:function(e){return this.internalMap.has(e)}},{key:"getNamespaced",value:function(e){return this.internalMap.get(e)}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.NamespacedMap=i},"./node_modules/matrix-events-sdk/lib/NamespacedValue.js":(e,t)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=i(e);if(t){var s=i(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(t,"__esModule",{value:!0}),t.UnstableValue=t.NamespacedValue=void 0;var u=function(){function e(t,n){if(s(this,e),this.stable=t,this.unstable=n,!this.unstable&&!this.stable)throw new Error("One of stable or unstable values must be supplied")}return l(e,[{key:"name",get:function(){return this.stable?this.stable:this.unstable}},{key:"altName",get:function(){return this.stable?this.unstable:null}},{key:"matches",value:function(e){return!!this.name&&this.name===e||!!this.altName&&this.altName===e}},{key:"findIn",value:function(e){var t;return this.name&&(t=null==e?void 0:e[this.name]),!t&&this.altName&&(t=null==e?void 0:e[this.altName]),t}},{key:"includedIn",value:function(e){var t=!1;return this.name&&(t=e.includes(this.name)),!t&&this.altName&&(t=e.includes(this.altName)),t}}]),e}();t.NamespacedValue=u;var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}(n,e);var t=o(n);function n(e,r){var o;if(s(this,n),!(o=t.call(this,e,r)).unstable)throw new Error("Unstable value must be supplied");return o}return l(n,[{key:"name",get:function(){return this.unstable}},{key:"altName",get:function(){return this.stable}}]),n}(u);t.UnstableValue=c},"./node_modules/matrix-events-sdk/lib/events/EmoteEvent.js":(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.EmoteEvent=void 0;var o=n("./node_modules/matrix-events-sdk/lib/events/MessageEvent.js"),i=n("./node_modules/matrix-events-sdk/lib/events/message_types.js"),s=n("./node_modules/matrix-events-sdk/lib/utility/events.js");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},u.apply(this,arguments)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(f,e);var t,n,r,o=m(f);function f(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),o.call(this,e)}return t=f,r=[{key:"from",value:function(e,t){var n;return new f({type:i.M_EMOTE.name,content:(n={},a(n,i.M_TEXT.name,e),a(n,i.M_HTML.name,t),n)})}}],(n=[{key:"isEmote",get:function(){return!0}},{key:"isEquivalentTo",value:function(e){return(0,s.isEventTypeSame)(e,i.M_EMOTE)||u(d(f.prototype),"isEquivalentTo",this).call(this,e)}},{key:"serialize",value:function(){var e=u(d(f.prototype),"serialize",this).call(this);return e.content.msgtype="m.emote",e}}])&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),f}(o.MessageEvent);t.EmoteEvent=f},"./node_modules/matrix-events-sdk/lib/events/ExtensibleEvent.js":(e,t)=>{"use strict";function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensibleEvent=void 0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wireFormat=t}var t,r,o;return t=e,(r=[{key:"wireContent",get:function(){return this.wireFormat.content}}])&&n(t.prototype,r),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.ExtensibleEvent=r},"./node_modules/matrix-events-sdk/lib/events/MessageEvent.js":(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.MessageEvent=void 0;var o=n("./node_modules/matrix-events-sdk/lib/events/ExtensibleEvent.js"),i=n("./node_modules/matrix-events-sdk/lib/types.js"),s=n("./node_modules/matrix-events-sdk/lib/InvalidEventError.js"),a=n("./node_modules/matrix-events-sdk/lib/events/message_types.js"),l=n("./node_modules/matrix-events-sdk/lib/utility/events.js");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}(this,n)}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(u,e);var t,n,r,o=f(u);function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),y(p(t=o.call(this,e)),"text",void 0),y(p(t),"html",void 0),y(p(t),"renderings",void 0);var n=a.M_MESSAGE.findIn(t.wireContent),r=a.M_TEXT.findIn(t.wireContent),l=a.M_HTML.findIn(t.wireContent);if((0,i.isProvided)(n)){if(!Array.isArray(n))throw new s.InvalidEventError("m.message contents must be an array");var c=n.find((function(e){return!(0,i.isProvided)(e.mimetype)||"text/plain"===e.mimetype})),m=n.find((function(e){return"text/html"===e.mimetype}));if(!c)throw new s.InvalidEventError("m.message is missing a plain text representation");t.text=c.body,t.html=null==m?void 0:m.body,t.renderings=n}else{if(!(0,i.isOptionalAString)(r))throw new s.InvalidEventError("Missing textual representation for event");t.text=r,t.html=l,t.renderings=[{body:r,mimetype:"text/plain"}],t.html&&t.renderings.push({body:t.html,mimetype:"text/html"})}return t}return t=u,r=[{key:"from",value:function(e,t){var n;return new u({type:a.M_MESSAGE.name,content:(n={},y(n,a.M_TEXT.name,e),y(n,a.M_HTML.name,t),n)})}}],(n=[{key:"isEmote",get:function(){return a.M_EMOTE.matches(this.wireFormat.type)||(0,i.isProvided)(a.M_EMOTE.findIn(this.wireFormat.content))}},{key:"isNotice",get:function(){return a.M_NOTICE.matches(this.wireFormat.type)||(0,i.isProvided)(a.M_NOTICE.findIn(this.wireFormat.content))}},{key:"isEquivalentTo",value:function(e){return(0,l.isEventTypeSame)(e,a.M_MESSAGE)}},{key:"serializeMMessageOnly",value:function(){var e=y({},a.M_MESSAGE.name,this.renderings);if(1===this.renderings.length){var t=this.renderings[0].mimetype;void 0!==t&&"text/plain"!==t||(e=y({},a.M_TEXT.name,this.renderings[0].body))}return e}},{key:"serialize",value:function(){var e;return{type:"m.room.message",content:c(c({},this.serializeMMessageOnly()),{},{body:this.text,msgtype:"m.text",format:this.html?"org.matrix.custom.html":void 0,formatted_body:null!==(e=this.html)&&void 0!==e?e:void 0})}}}])&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(o.ExtensibleEvent);t.MessageEvent=b},"./node_modules/matrix-events-sdk/lib/events/NoticeEvent.js":(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.NoticeEvent=void 0;var o=n("./node_modules/matrix-events-sdk/lib/events/MessageEvent.js"),i=n("./node_modules/matrix-events-sdk/lib/events/message_types.js"),s=n("./node_modules/matrix-events-sdk/lib/utility/events.js");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},u.apply(this,arguments)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(f,e);var t,n,r,o=m(f);function f(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),o.call(this,e)}return t=f,r=[{key:"from",value:function(e,t){var n;return new f({type:i.M_NOTICE.name,content:(n={},a(n,i.M_TEXT.name,e),a(n,i.M_HTML.name,t),n)})}}],(n=[{key:"isNotice",get:function(){return!0}},{key:"isEquivalentTo",value:function(e){return(0,s.isEventTypeSame)(e,i.M_NOTICE)||u(d(f.prototype),"isEquivalentTo",this).call(this,e)}},{key:"serialize",value:function(){var e=u(d(f.prototype),"serialize",this).call(this);return e.content.msgtype="m.notice",e}}])&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),f}(o.MessageEvent);t.NoticeEvent=f},"./node_modules/matrix-events-sdk/lib/events/PollEndEvent.js":(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.PollEndEvent=void 0;var o=n("./node_modules/matrix-events-sdk/lib/events/poll_types.js"),i=n("./node_modules/matrix-events-sdk/lib/InvalidEventError.js"),s=n("./node_modules/matrix-events-sdk/lib/events/relationship_types.js"),a=n("./node_modules/matrix-events-sdk/lib/events/MessageEvent.js"),l=n("./node_modules/matrix-events-sdk/lib/events/message_types.js"),u=n("./node_modules/matrix-events-sdk/lib/utility/events.js");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}(this,n)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(y,e);var t,n,r,c=p(y);function y(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),b(v(t=c.call(this,e)),"pollEventId",void 0),b(v(t),"closingMessage",void 0);var n=t.wireContent["m.relates_to"];if(!s.REFERENCE_RELATION.matches(null==n?void 0:n.rel_type)||"string"!=typeof(null==n?void 0:n.event_id))throw new i.InvalidEventError("Relationship must be a reference to an event");return t.pollEventId=n.event_id,t.closingMessage=new a.MessageEvent(t.wireFormat),t}return t=y,r=[{key:"from",value:function(e,t){var n;return new y({type:o.M_POLL_END.name,content:(n={"m.relates_to":{rel_type:s.REFERENCE_RELATION.name,event_id:e}},b(n,o.M_POLL_END.name,{}),b(n,l.M_TEXT.name,t),n)})}}],(n=[{key:"isEquivalentTo",value:function(e){return(0,u.isEventTypeSame)(e,o.M_POLL_END)}},{key:"serialize",value:function(){return{type:o.M_POLL_END.name,content:m(b({"m.relates_to":{rel_type:s.REFERENCE_RELATION.name,event_id:this.pollEventId}},o.M_POLL_END.name,{}),this.closingMessage.serialize().content)}}}])&&d(t.prototype,n),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),y}(n("./node_modules/matrix-events-sdk/lib/events/ExtensibleEvent.js").ExtensibleEvent);t.PollEndEvent=h},"./node_modules/matrix-events-sdk/lib/events/PollResponseEvent.js":(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.PollResponseEvent=void 0;var o=n("./node_modules/matrix-events-sdk/lib/events/ExtensibleEvent.js"),i=n("./node_modules/matrix-events-sdk/lib/events/poll_types.js"),s=n("./node_modules/matrix-events-sdk/lib/InvalidEventError.js"),a=n("./node_modules/matrix-events-sdk/lib/events/relationship_types.js"),l=n("./node_modules/matrix-events-sdk/lib/utility/events.js");function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}(this,n)}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(f,e);var t,n,r,o=m(f);function f(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),p(d(t=o.call(this,e)),"internalAnswerIds",void 0),p(d(t),"internalSpoiled",void 0),p(d(t),"pollEventId",void 0);var n=t.wireContent["m.relates_to"];if(!a.REFERENCE_RELATION.matches(null==n?void 0:n.rel_type)||"string"!=typeof(null==n?void 0:n.event_id))throw new s.InvalidEventError("Relationship must be a reference to an event");return t.pollEventId=n.event_id,t.validateAgainst(null),t}return t=f,r=[{key:"from",value:function(e,t){return new f({type:i.M_POLL_RESPONSE.name,content:p({"m.relates_to":{rel_type:a.REFERENCE_RELATION.name,event_id:t}},i.M_POLL_RESPONSE.name,{answers:e})})}}],(n=[{key:"answerIds",get:function(){return this.internalAnswerIds}},{key:"spoiled",get:function(){return this.internalSpoiled}},{key:"validateAgainst",value:function(e){var t=i.M_POLL_RESPONSE.findIn(this.wireContent);if(!Array.isArray(null==t?void 0:t.answers))return this.internalSpoiled=!0,void(this.internalAnswerIds=[]);var n=t.answers;if(n.some((function(e){return"string"!=typeof e}))||0===n.length)return this.internalSpoiled=!0,void(this.internalAnswerIds=[]);if(e){if(n.some((function(t){return!e.answers.some((function(e){return e.id===t}))})))return this.internalSpoiled=!0,void(this.internalAnswerIds=[]);n=n.slice(0,e.maxSelections)}this.internalAnswerIds=n,this.internalSpoiled=!1}},{key:"isEquivalentTo",value:function(e){return(0,l.isEventTypeSame)(e,i.M_POLL_RESPONSE)}},{key:"serialize",value:function(){return{type:i.M_POLL_RESPONSE.name,content:p({"m.relates_to":{rel_type:a.REFERENCE_RELATION.name,event_id:this.pollEventId}},i.M_POLL_RESPONSE.name,{answers:this.spoiled?void 0:this.answerIds})}}}])&&u(t.prototype,n),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),f}(o.ExtensibleEvent);t.PollResponseEvent=v},"./node_modules/matrix-events-sdk/lib/events/PollStartEvent.js":(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.PollStartEvent=t.PollAnswerSubevent=void 0;var o=n("./node_modules/matrix-events-sdk/lib/events/poll_types.js"),i=n("./node_modules/matrix-events-sdk/lib/events/MessageEvent.js"),s=n("./node_modules/matrix-events-sdk/lib/events/message_types.js"),a=n("./node_modules/matrix-events-sdk/lib/InvalidEventError.js"),l=n("./node_modules/matrix-events-sdk/lib/NamespacedValue.js"),u=n("./node_modules/matrix-events-sdk/lib/utility/events.js"),c=n("./node_modules/matrix-events-sdk/lib/events/ExtensibleEvent.js");function m(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=O(e);if(t){var i=O(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}(this,n)}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){h(n,e);var t=g(n);function n(e){var r;v(this,n),j(E(r=t.call(this,e)),"id",void 0);var o=e.content.id;if(!o||"string"!=typeof o)throw new a.InvalidEventError("Answer ID must be a non-empty string");return r.id=o,r}return b(n,[{key:"serialize",value:function(){return{type:"org.matrix.sdk.poll.answer",content:p({id:this.id},this.serializeMMessageOnly())}}}],[{key:"from",value:function(e,t){return new n({type:"org.matrix.sdk.poll.answer",content:j({id:e},s.M_TEXT.name,t)})}}]),n}(i.MessageEvent);t.PollAnswerSubevent=w;var k=function(e){h(n,e);var t=g(n);function n(e){var r;v(this,n),j(E(r=t.call(this,e)),"question",void 0),j(E(r),"kind",void 0),j(E(r),"rawKind",void 0),j(E(r),"maxSelections",void 0),j(E(r),"answers",void 0);var s=o.M_POLL_START.findIn(r.wireContent);if(!s.question)throw new a.InvalidEventError("A question is required");if(r.question=new i.MessageEvent({type:"org.matrix.sdk.poll.question",content:s.question}),r.rawKind=s.kind,o.M_POLL_KIND_DISCLOSED.matches(r.rawKind)?r.kind=o.M_POLL_KIND_DISCLOSED:r.kind=o.M_POLL_KIND_UNDISCLOSED,r.maxSelections=Number.isFinite(s.max_selections)&&s.max_selections>0?s.max_selections:1,!Array.isArray(s.answers))throw new a.InvalidEventError("Poll answers must be an array");var l=s.answers.slice(0,20).map((function(e){return new w({type:"org.matrix.sdk.poll.answer",content:e})}));if(l.length<=0)throw new a.InvalidEventError("No answers available");return r.answers=l,r}return b(n,[{key:"isEquivalentTo",value:function(e){return(0,u.isEventTypeSame)(e,o.M_POLL_START)}},{key:"serialize",value:function(){var e;return{type:o.M_POLL_START.name,content:(e={},j(e,o.M_POLL_START.name,{question:this.question.serialize().content,kind:this.rawKind,max_selections:this.maxSelections,answers:this.answers.map((function(e){return e.serialize().content}))}),j(e,s.M_TEXT.name,"".concat(this.question.text,"\n").concat(this.answers.map((function(e,t){return"".concat(t+1,". ").concat(e.text)})).join("\n"))),e)}}}],[{key:"from",value:function(e,t,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new n({type:o.M_POLL_START.name,content:(i={},j(i,s.M_TEXT.name,e),j(i,o.M_POLL_START.name,{question:j({},s.M_TEXT.name,e),kind:r instanceof l.NamespacedValue?r.name:r,max_selections:a,answers:t.map((function(e){return j({id:m(Array(16)).map((function(){return x.charAt(Math.floor(Math.random()*x.length))})).join("")},s.M_TEXT.name,e)}))}),i)})}}]),n}(c.ExtensibleEvent);t.PollStartEvent=k;var x="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"},"./node_modules/matrix-events-sdk/lib/events/message_types.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.M_TEXT=t.M_NOTICE=t.M_MESSAGE=t.M_HTML=t.M_EMOTE=void 0;var r=n("./node_modules/matrix-events-sdk/lib/NamespacedValue.js"),o=new r.UnstableValue("m.message","org.matrix.msc1767.message");t.M_MESSAGE=o;var i=new r.UnstableValue("m.text","org.matrix.msc1767.text");t.M_TEXT=i;var s=new r.UnstableValue("m.html","org.matrix.msc1767.html");t.M_HTML=s;var a=new r.UnstableValue("m.emote","org.matrix.msc1767.emote");t.M_EMOTE=a;var l=new r.UnstableValue("m.notice","org.matrix.msc1767.notice");t.M_NOTICE=l},"./node_modules/matrix-events-sdk/lib/events/poll_types.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.M_POLL_START=t.M_POLL_RESPONSE=t.M_POLL_KIND_UNDISCLOSED=t.M_POLL_KIND_DISCLOSED=t.M_POLL_END=void 0;var r=n("./node_modules/matrix-events-sdk/lib/NamespacedValue.js"),o=new r.UnstableValue("m.poll.disclosed","org.matrix.msc3381.poll.disclosed");t.M_POLL_KIND_DISCLOSED=o;var i=new r.UnstableValue("m.poll.undisclosed","org.matrix.msc3381.poll.undisclosed");t.M_POLL_KIND_UNDISCLOSED=i;var s=new r.UnstableValue("m.poll.start","org.matrix.msc3381.poll.start");t.M_POLL_START=s;var a=new r.UnstableValue("m.poll.response","org.matrix.msc3381.poll.response");t.M_POLL_RESPONSE=a;var l=new r.UnstableValue("m.poll.end","org.matrix.msc3381.poll.end");t.M_POLL_END=l},"./node_modules/matrix-events-sdk/lib/events/relationship_types.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REFERENCE_RELATION=void 0;var r=new(n("./node_modules/matrix-events-sdk/lib/NamespacedValue.js").NamespacedValue)("m.reference");t.REFERENCE_RELATION=r},"./node_modules/matrix-events-sdk/lib/index.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/matrix-events-sdk/lib/ExtensibleEvents.js");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var o=n("./node_modules/matrix-events-sdk/lib/IPartialEvent.js");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=n("./node_modules/matrix-events-sdk/lib/InvalidEventError.js");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var s=n("./node_modules/matrix-events-sdk/lib/NamespacedValue.js");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var a=n("./node_modules/matrix-events-sdk/lib/NamespacedMap.js");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var l=n("./node_modules/matrix-events-sdk/lib/types.js");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var u=n("./node_modules/matrix-events-sdk/lib/utility/MessageMatchers.js");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var c=n("./node_modules/matrix-events-sdk/lib/utility/events.js");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var m=n("./node_modules/matrix-events-sdk/lib/interpreters/legacy/MRoomMessage.js");Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))}));var d=n("./node_modules/matrix-events-sdk/lib/interpreters/modern/MMessage.js");Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var f=n("./node_modules/matrix-events-sdk/lib/interpreters/modern/MPoll.js");Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}));var p=n("./node_modules/matrix-events-sdk/lib/events/relationship_types.js");Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}));var v=n("./node_modules/matrix-events-sdk/lib/events/ExtensibleEvent.js");Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))}));var y=n("./node_modules/matrix-events-sdk/lib/events/message_types.js");Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===y[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}}))}));var b=n("./node_modules/matrix-events-sdk/lib/events/MessageEvent.js");Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===b[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}}))}));var h=n("./node_modules/matrix-events-sdk/lib/events/EmoteEvent.js");Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}));var _=n("./node_modules/matrix-events-sdk/lib/events/NoticeEvent.js");Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===_[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}}))}));var g=n("./node_modules/matrix-events-sdk/lib/events/poll_types.js");Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}}))}));var E=n("./node_modules/matrix-events-sdk/lib/events/PollStartEvent.js");Object.keys(E).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===E[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return E[e]}}))}));var O=n("./node_modules/matrix-events-sdk/lib/events/PollResponseEvent.js");Object.keys(O).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===O[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return O[e]}}))}));var j=n("./node_modules/matrix-events-sdk/lib/events/PollEndEvent.js");Object.keys(j).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===j[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return j[e]}}))}))},"./node_modules/matrix-events-sdk/lib/interpreters/legacy/MRoomMessage.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LEGACY_M_ROOM_MESSAGE=void 0,t.parseMRoomMessage=function(e){var t,n,s;if(a.M_MESSAGE.findIn(e.content)||a.M_TEXT.findIn(e.content))return new r.MessageEvent(e);var l,m=null===(t=e.content)||void 0===t?void 0:t.msgtype,d=null===(n=e.content)||void 0===n?void 0:n.body,f="org.matrix.custom.html"===(null===(s=e.content)||void 0===s?void 0:s.format)?e.content.formatted_body:null;return"m.text"===m?new r.MessageEvent(u(u({},e),{},{content:u(u({},e.content),{},(l={},c(l,a.M_TEXT.name,d),c(l,a.M_HTML.name,f),l))})):"m.notice"===m?new o.NoticeEvent(u(u({},e),{},{content:u(u({},e.content),{},(p={},c(p,a.M_TEXT.name,d),c(p,a.M_HTML.name,f),p))})):"m.emote"===m?new i.EmoteEvent(u(u({},e),{},{content:u(u({},e.content),{},(v={},c(v,a.M_TEXT.name,d),c(v,a.M_HTML.name,f),v))})):null;var p,v};var r=n("./node_modules/matrix-events-sdk/lib/events/MessageEvent.js"),o=n("./node_modules/matrix-events-sdk/lib/events/NoticeEvent.js"),i=n("./node_modules/matrix-events-sdk/lib/events/EmoteEvent.js"),s=n("./node_modules/matrix-events-sdk/lib/NamespacedValue.js"),a=n("./node_modules/matrix-events-sdk/lib/events/message_types.js");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=new s.NamespacedValue("m.room.message");t.LEGACY_M_ROOM_MESSAGE=m},"./node_modules/matrix-events-sdk/lib/interpreters/modern/MMessage.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMMessage=function(e){if(o.M_EMOTE.matches(e.type))return new i.EmoteEvent(e);if(o.M_NOTICE.matches(e.type))return new s.NoticeEvent(e);return new r.MessageEvent(e)};var r=n("./node_modules/matrix-events-sdk/lib/events/MessageEvent.js"),o=n("./node_modules/matrix-events-sdk/lib/events/message_types.js"),i=n("./node_modules/matrix-events-sdk/lib/events/EmoteEvent.js"),s=n("./node_modules/matrix-events-sdk/lib/events/NoticeEvent.js")},"./node_modules/matrix-events-sdk/lib/interpreters/modern/MPoll.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMPoll=function(e){if(r.M_POLL_START.matches(e.type))return new o.PollStartEvent(e);if(r.M_POLL_RESPONSE.matches(e.type))return new i.PollResponseEvent(e);if(r.M_POLL_END.matches(e.type))return new s.PollEndEvent(e);return null};var r=n("./node_modules/matrix-events-sdk/lib/events/poll_types.js"),o=n("./node_modules/matrix-events-sdk/lib/events/PollStartEvent.js"),i=n("./node_modules/matrix-events-sdk/lib/events/PollResponseEvent.js"),s=n("./node_modules/matrix-events-sdk/lib/events/PollEndEvent.js")},"./node_modules/matrix-events-sdk/lib/types.js":(e,t)=>{"use strict";function n(e){return null!=e}Object.defineProperty(t,"__esModule",{value:!0}),t.isOptionalAString=function(e){return n(e)&&"string"==typeof e},t.isProvided=n},"./node_modules/matrix-events-sdk/lib/utility/MessageMatchers.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LegacyMsgType=void 0,t.isEventLike=function(e,t){var n=e.content;if(t===r.Text)return o.M_MESSAGE.matches(e.type)||"m.room.message"===e.type&&"m.text"===(null==n?void 0:n.msgtype);if(t===r.Emote)return o.M_EMOTE.matches(e.type)||"m.room.message"===e.type&&"m.emote"===(null==n?void 0:n.msgtype);if(t===r.Notice)return o.M_NOTICE.matches(e.type)||"m.room.message"===e.type&&"m.notice"===(null==n?void 0:n.msgtype);return!1};var r,o=n("./node_modules/matrix-events-sdk/lib/events/message_types.js");t.LegacyMsgType=r,function(e){e.Text="m.text",e.Notice="m.notice",e.Emote="m.emote"}(r||(t.LegacyMsgType=r={}))},"./node_modules/matrix-events-sdk/lib/utility/events.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEventTypeSame=function(e,t){if("string"==typeof e)return"string"==typeof t?t===e:t.matches(e);if("string"==typeof t)return e.matches(t);var n=t,r=e;return n.matches(r.name)||n.matches(r.altName)}},"./node_modules/p-retry/index.js":(e,t,n)=>{"use strict";const r=n("./node_modules/retry/index.js"),o=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class i extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,({message:e}=e)):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const s=(e,t)=>new Promise(((n,s)=>{t={onFailedAttempt:()=>{},retries:10,...t};const a=r.operation(t);a.attempt((async r=>{try{n(await e(r))}catch(e){if(!(e instanceof Error))return void s(new TypeError(`Non-error was thrown: "${e}". You should only throw errors.`));if(e instanceof i)a.stop(),s(e.originalError);else if(e instanceof TypeError&&(l=e.message,!o.includes(l)))a.stop(),s(e);else{((e,t,n)=>{const r=n.retries-(t-1);e.attemptNumber=t,e.retriesLeft=r})(e,r,t);try{await t.onFailedAttempt(e)}catch(e){return void s(e)}a.retry(e)||s(a.mainError())}}var l}))}));e.exports=s,e.exports.default=s,e.exports.AbortError=i},"./node_modules/retry/index.js":(e,t,n)=>{e.exports=n("./node_modules/retry/lib/retry.js")},"./node_modules/retry/lib/retry.js":(e,t,n)=>{var r=n("./node_modules/retry/lib/retry_operation.js");t.operation=function(e){var n=t.timeouts(e);return new r(n,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var n in e)t[n]=e[n];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],o=0;o<t.retries;o++)r.push(this.createTimeout(o,t));return e&&e.forever&&!r.length&&r.push(this.createTimeout(o,t)),r.sort((function(e,t){return e-t})),r},t.createTimeout=function(e,t){var n=t.randomize?Math.random()+1:1,r=Math.round(n*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return r=Math.min(r,t.maxTimeout)},t.wrap=function(e,n,r){if(n instanceof Array&&(r=n,n=null),!r)for(var o in r=[],e)"function"==typeof e[o]&&r.push(o);for(var i=0;i<r.length;i++){var s=r[i],a=e[s];e[s]=function(r){var o=t.operation(n),i=Array.prototype.slice.call(arguments,1),s=i.pop();i.push((function(e){o.retry(e)||(e&&(arguments[0]=o.mainError()),s.apply(this,arguments))})),o.attempt((function(){r.apply(e,i)}))}.bind(e,a),e[s].options=n}}},"./node_modules/retry/lib/retry_operation.js":e=>{function t(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(void 0===n){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1)}var r=this;return this._timer=setTimeout((function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout((function(){r._operationTimeoutCb(r._attempts)}),r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)}),n),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){n._operationTimeoutCb()}),n._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,n=0,r=0;r<this._errors.length;r++){var o=this._errors[r],i=o.message,s=(e[i]||0)+1;e[i]=s,s>=n&&(t=o,n=s)}return t}},"./node_modules/unhomoglyph/index.js":(e,t,n)=>{"use strict";var r=n("./node_modules/unhomoglyph/data.json");var o=RegExp(Object.keys(r).map((function(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")})).join("|"),"g");function i(e){return r[e]}e.exports=function(e){return e.replace(o,i)}},"./node_modules/@babel/runtime/helpers/esm/defineProperty.js":(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n("./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js");function o(e,t,n){return(t=(0,r.A)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},"./node_modules/@babel/runtime/helpers/esm/toPrimitive.js":(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n("./node_modules/@babel/runtime/helpers/esm/typeof.js");function o(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=(0,r.A)(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}},"./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js":(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),o=n("./node_modules/@babel/runtime/helpers/esm/toPrimitive.js");function i(e){var t=(0,o.A)(e,"string");return"symbol"==(0,r.A)(t)?t:t+""}},"./node_modules/@babel/runtime/helpers/esm/typeof.js":(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})}}]);
//# sourceMappingURL=6063.js.map